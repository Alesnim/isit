---
description: 'Цель работы: ознакомится с инструментом обработки данных Jupiter Notebook'
---

# Практическая 8. Работа с Jupiter Notebook

## Теоретические сведения

### Запуск Jupiter Notebook 

Два способа: 

1. **Пуск** → **Все программы** → **Anaconda 3** → **Jupyter Notebook**. O

2. В командной строке ввести `jupyter notebook`.

### Что происходит, когда нашли и запустили Jupyter Notebook?

1. Появится консоль \(рис. 1\)
2. Jupyter Notebook открывается в браузере по умолчанию, появляется вкладка Home. Если браузер по умолчанию Internet Explorer, лучше скопировать ссылку \([http://localhost:8888/tree](http://localhost:8888/tree)\) в другой браузер \(Google Chrome, Mozilla Firefox\), чтобы быстрее работало.

![&#x420;&#x438;&#x441;&#x443;&#x43D;&#x43E;&#x43A; 1 - &#x41E;&#x43A;&#x43D;&#x43E; &#x43A;&#x43E;&#x43D;&#x441;&#x43E;&#x43B;&#x438; &#x43F;&#x440;&#x438; &#x437;&#x430;&#x43F;&#x443;&#x441;&#x43A;&#x435; Jupiter Notebook](../.gitbook/assets/image%20%2860%29.png)

А что если Jupyter Notebook не открывается в браузере?

В консоли, которая появляется при запуске \(см.выше\), есть ссылка \([http://localhost:8888/tree](http://localhost:8888/tree)\). Ее можно скопировать в браузер.

### Jupyter Notebook открылся – что дальше?

Первое, что бросается в глаза – список каких-то файлов и папок \(рис. 2\). Это файлы и папки, хранящиеся в папке, которая является рабочей по умолчанию \(была выбрана при установке\).

![&#x420;&#x438;&#x441;&#x443;&#x43D;&#x43E;&#x43A; 2 - &#x414;&#x43E;&#x43C;&#x430;&#x448;&#x43D;&#x44F;&#x44F; &#x441;&#x442;&#x440;&#x430;&#x43D;&#x438;&#x446;&#x430; Jupiter](../.gitbook/assets/image%20%2870%29.png)

Если по отображающимся файлам непонятно, какая папка является рабочей, это можно узнать, например, создав новый ipynb-файл и исполнив следующие строки \(о том, как создавать новые ipynb-файлы и про запуск кода см. далее\):

```python
import os
os.getcwd()
```

Рабочая папка в данном случае /home/oem/. При желании рабочую папку \(из которой запускается Jupyter Notebook\) можно изменить. Например, так или так \(перевод ответа на stackoverflow.com\):

1. Открыть командную строку и ввести `jupyter notebook --generate-config`
2. Будет создан текстовый файл C:\Users\username.jupyter\jupyter\_notebook\_config.
3. Открыть этот файл \(с помощью Блокнота или другого обычного текстового редактора\). Найти строку номер 179 `#c.NotebookApp.notebook_dir = ”`.
4. Изменить ее на `c.NotebookApp.notebook_dir = ’C:/your/folder/’`, то есть вписать в `notebook_dir =”` путь к папке, из которой мы хотим запускать Jupyter Notebook. Сохранить и закрыть файл.

После этого Jupyter Notebook должен запускаться из той папки, которую вы указали. Если никаких изменений не произошло, откройте файл снова и убедитесь, что в строке, которую редактировали, вы не забыли убрать \# в начале строки \(раскомментировать строку\).

Если Jupyter Notebook перестал запускаться, проверьте, что 

а\) папка, к которой вы указали путь в notebook\_dir =”, существует; 

б\) при записи пути к это папке использовались прямые слэши \(/\), а не обратные \(\).

Можно ничего не менять, а действовать так \(обычно так и делается\): переходить в папку, из которой хотим запустить Jupyter Notebook, а потом в командной строке, запущенной из этой папки, вводить jupyter notebook. 

### Работа в Jupiter Notebook

С помощью Jupyter Notebook можно загружать файлы \(при загрузке они будут помещены в папку, из которой запускается Jupyter Notebook\) или создавать свои файлы \(ipynb и не только\). С помощью Jupyter Notebook можно редактировать и запускать код, а также добавлять к нему текстовые комментарии.

#### Как загрузить файл в Jupyter Notebook \(например, файл с материалами лекции/семинара\)?

После того как открылась страница Home, нажать Upload \(в правом верхнем углу\)\(рис. 3\).

![&#x420;&#x438;&#x441;&#x443;&#x43D;&#x43E;&#x43A; 3 - &#x41E;&#x43A;&#x43D;&#x43E; &#x441; &#x432;&#x44B;&#x434;&#x435;&#x43B;&#x435;&#x43D;&#x43D;&#x43E;&#x439; &#x43A;&#x43D;&#x43E;&#x43F;&#x43A;&#x43E;&#x439; &#x437;&#x430;&#x433;&#x440;&#x443;&#x437;&#x43A;&#x438;](../.gitbook/assets/image%20%2868%29.png)

#### Как создать свой ipynb-файл?

После того как открылась страница **Home**, нажать **New**.

![&#x420;&#x438;&#x441;&#x443;&#x43D;&#x43E;&#x43A; 4 - &#x41E;&#x43A;&#x43D;&#x43E; &#x441; &#x43E;&#x442;&#x43C;&#x435;&#x447;&#x435;&#x43D;&#x43D;&#x44B;&#x43C; &#x432;&#x44B;&#x43F;&#x430;&#x434;&#x430;&#x44E;&#x449;&#x438;&#x43C; &#x43C;&#x435;&#x43D;&#x44E; New](../.gitbook/assets/image%20%2867%29.png)

Выбрать Python 3 \(python \[root\] или что-то подобное, зависит от того, как было названо ядро при установке\). В новой вкладке браузера появится файл **Untitled.ipynb**.

![&#x420;&#x438;&#x441;&#x443;&#x43D;&#x43E;&#x43A; 5 - &#x41E;&#x43A;&#x43D;&#x43E; &#x43D;&#x43E;&#x443;&#x442;&#x431;&#x443;&#x43A;&#x430;](../.gitbook/assets/image%20%2869%29.png)

#### Как писать код?

Хотим написать код. По умолчанию тип ячейки всегда _Code_

![&#x420;&#x438;&#x441;&#x443;&#x43D;&#x43E;&#x43A; 6 - &#x41E;&#x43A;&#x43D;&#x43E; &#x43D;&#x43E;&#x443;&#x442;&#x431;&#x443;&#x43A;&#x430; &#x441; &#x43E;&#x442;&#x43C;&#x435;&#x447;&#x435;&#x43D;&#x43D;&#x44B;&#x43C; &#x43C;&#x435;&#x43D;&#x44E; &quot;&#x422;&#x438;&#x43F; &#x44F;&#x447;&#x435;&#x439;&#x43A;&#x438;&quot;](../.gitbook/assets/image%20%2863%29.png)

Пишем код \(создаем переменные A и B и присваиваем им значения 1 и 2 соответственно\):

![&#x420;&#x438;&#x441;&#x443;&#x43D;&#x43E;&#x43A; 7 - &#x41E;&#x43A;&#x43D;&#x43E; &#x43D;&#x43E;&#x443;&#x442;&#x431;&#x443;&#x43A;&#x430; &#x441; &#x437;&#x430;&#x43F;&#x43E;&#x43B;&#x43D;&#x435;&#x43D;&#x43D;&#x43E;&#x439; &#x44F;&#x447;&#x435;&#x439;&#x43A;&#x43E;&#x439; &#x43A;&#x43E;&#x434;&#x430;](../.gitbook/assets/image%20%2862%29.png)

Исполняем код: нажимаем Shift+Enter. Код исполнен, курсор перешел в следующую \(только созданную\) ячейку.

Если код подразумевает вывод чего-то на экран, то ожидаемый вывод появится под строкой:

![&#x420;&#x438;&#x441;&#x443;&#x43D;&#x43E;&#x43A; 8 - &#x41E;&#x43A;&#x43D;&#x43E; &#x43D;&#x43E;&#x443;&#x442;&#x431;&#x443;&#x43A;&#x430; &#x441; &#x43D;&#x435;&#x441;&#x43A;&#x43E;&#x43B;&#x44C;&#x43A;&#x438;&#x43C;&#x438; &#x44F;&#x447;&#x435;&#x439;&#x43A;&#x430;&#x43C;&#x438; &#x43A;&#x43E;&#x434;&#x430;](../.gitbook/assets/image%20%2865%29.png)

#### Как написать размеченный текст

Изменяем тип ячейки на Markdown \(про язык разметки Markdown можно почитать [здесь](https://ru.wikipedia.org/wiki/Markdown), [здесь ](https://jupyter-notebook.readthedocs.io/en/latest/examples/Notebook/Working%20With%20Markdown%20Cells.html)и [здесь](http://nestacms.com/docs/creating-content/markdown-cheat-sheet)\). Пишем текст и компилируем – нажимаем _Shift+Enter_

Например, исходный текст: 

```python
# Пример заголовка

Пример текста

Кот лакает *молоко*, а потом идет __поспать__.
```

Станет таким:

![&#x420;&#x438;&#x441;&#x443;&#x43D;&#x43E;&#x43A; 9 - &#x422;&#x435;&#x43A;&#x441;&#x442; &#x432; &#x44F;&#x447;&#x435;&#x439;&#x43A;&#x435; &#x440;&#x430;&#x437;&#x43C;&#x435;&#x442;&#x43A;&#x438; Markdown](../.gitbook/assets/image%20%2861%29.png)

### Как добавить еще одну ячейку?

В меню выбрать **Insert Cell** и соответствующий пункт \(добавить ячейку выше или ниже текущей\).

#### Как удалить/передвинуть/скопировать ячейку?

В меню выбрать **Edit** и соответствующий пункт: **Cut Cells** \(удалить\), **Move Cell Up** \(передвинуть вверх\), **Move Cell Down** \(передвинуть вниз\), **Copy Cells** \(скопировать\). То же можно сделать с помощью панели инструментов, находящейся под меню \(при наведении курсора на значок, выдается описание действия\).

### **Вывод изображений в ноутбуке**

Печать изображений может пригодиться в том случае, если вы используете библиотеку matplotlib для построения графиков. По умолчанию, графики не выводятся в рабочее поле ноутбука. Для того, чтобы графики отображались, необходимо ввести и выполнить следующую команду:

```python
%matplotlib inline
```

Пример вывода графика представлен на рисунке ниже.

![&#x420;&#x438;&#x441;&#x443;&#x43D;&#x43E;&#x43A; 9 - &#x41F;&#x440;&#x438;&#x43C;&#x435;&#x440; &#x433;&#x440;&#x430;&#x444;&#x438;&#x43A;&#x430; &#x432; &#x43D;&#x43E;&#x443;&#x442;&#x431;&#x443;&#x43A;&#x435; ](../.gitbook/assets/image%20%2864%29.png)



### Работа с Pandas

Для того, чтобы начать работать с данными, необходимо сначала загрузить их из файла. В данном задании мы будем работать с данными в формате CSV, предназначенном для хранения табличных данных: столбцы разделяются запятой, первая строка содержит имена столбцов. Пример загрузки данных в Pandas:

```python
import pandas
data = pandas.read_csv("titanic.csv", index_col="PassengerId")
```

Данные будут загружены в виде _DataFrame_, с помощью которого можно удобно работать с ними. В данном случае параметр `index_col="PassengerId"`означает, что колонка _PassengerId_ задает нумерацию строк данного датафрейма.

Для того, чтобы посмотреть что представляют из себя данные, можно воспользоваться несколькими способами: 

* более привычным с точки зрения Python \(если индекс указывается только один, то производится выбор строк\):

```python
data[:10]
```

* или же воспользоваться методом датафрейма:

```python
data.head()
```

Один из способов доступа к столбцам датафрейма — использовать квадратные скобки и название столбца:

```python
data ["Pclass"]
```

Для подсчета некоторых статистик \(количества, среднее, максимум, минимум\) можно также использовать методы датафрейма:

```python
data["Pclass"].value_counts()
```

Более подробно со списком методов датафрейма можно познакомиться в документации. 

## Ход работы

Установить окружение Anaconda. Ознакомится с теоретическим материалом. Создать ноутбук и загрузить набор данных:

{% file src="../.gitbook/assets/titanic.csv" caption="Набор данных \"Титаник\"" %}

Дополнительно ознакомится с документацией к библиотеке [Pandas](https://pandas.pydata.org/docs/). 

### Задание 1. Работа с языком Python

Загрузите и откройте в Jupiter notebook следующий [ноутбук](https://drive.google.com/file/d/1cmfPG5uoAWORPKbKMU96V8Vp4PAhBevS/view?usp=sharing). Выполните предложенные задания. 

### Задание 2. Работа с Pandas и наборами данных.

Загрузите и откройте в Jupiter notebook следующий [ноутбук](https://drive.google.com/file/d/1PsfRv_pMbLrnSjA-uPDZyL-bDybVFcC1/view?usp=sharing).

Загрузите набор данных: 

{% file src="../.gitbook/assets/gameoftrones.rar" caption="Набор данных в архиве" %}

Разархивируйте набор, и скопируйте файл в директорию с ноутбуком. Выполните предложенные задания. 

### Задание 3. Работа с наборами данных. 

Загрузите датасет titanic.csv и, используя описанные выше способы работы с данными, найдите ответы на вопросы:

1. Какое количество мужчин и женщин ехало на корабле? В качестве ответа приведите два числа через пробел.
2. Какой части пассажиров удалось выжить? Посчитайте долю выживших пассажиров. Ответ приведите в процентах \(число в интервале от 0 до 100, знак процента не нужен\), округлив до двух знаков.
3. Какую долю пассажиры первого класса составляли среди всех пассажиров? Ответ приведите в процентах \(число в интервале от 0 до 100, знак процента не нужен\), округлив до двух знаков.
4. Какого возраста были пассажиры? Посчитайте среднее и медиану возраста пассажиров. Посчитайте среднее и медиану возраста пассажиров. В качестве ответа приведите два числа через пробел.

### Задание 2. 

Выполнить поиск минимума функции при помощи разных вариантов генетических алгоритмов модуля оптимизации пакета Scilab:

1. $$y(x) = \sum_{i=1}^{n} x_i^2, x \in (-5.12, 5.12)$$ 
2. $$z(x,y) =  x^2+y^2-cos(12x)-cos(18y), x \in (-2, 2)$$

## Контрольные вопросы

1. За что отвечают параметры алгоритма `optim_ga`

### Критерии оценки практического занятия

Оценивается знание материала, способность к его обобщению, критическому осмыслению, систематизации. 

* 3 балла: студент полностью выполнил задания.
* 2 балла: в усвоении учебного материала допущены небольшие пробелы.
* 1 балл: неполно или непоследовательно реализовано задание.
* 0 баллов: не раскрыто основное содержание учебного материала.

**Максимальный балл: 3 балла**

