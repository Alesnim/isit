---
description: 'Цель работы: ознакомится с инструментом обработки данных Jupiter Notebook'
---

# Практическая 8. Работа с Jupiter Notebook

## Теоретические сведения

### Запуск Jupiter Notebook&#x20;

Два способа:&#x20;

1\. **Пуск **→ **Все программы** → **Anaconda 3** → **Jupyter Notebook**. O

2\. В командной строке ввести `jupyter notebook`.

### Что происходит, когда нашли и запустили Jupyter Notebook?

1. Появится консоль (рис. 1)
2. Jupyter Notebook открывается в браузере по умолчанию, появляется вкладка Home. Если браузер по умолчанию Internet Explorer, лучше скопировать ссылку ([http://localhost:8888/tree](http://localhost:8888/tree)) в другой браузер (Google Chrome, Mozilla Firefox), чтобы быстрее работало.

![Рисунок 1 - Окно консоли при запуске Jupiter Notebook](<../.gitbook/assets/image (60).png>)

А что если Jupyter Notebook не открывается в браузере?

В консоли, которая появляется при запуске (см.выше), есть ссылка ([http://localhost:8888/tree](http://localhost:8888/tree)). Ее можно скопировать в браузер.

### Jupyter Notebook открылся – что дальше?

Первое, что бросается в глаза – список каких-то файлов и папок (рис. 2). Это файлы и папки, хранящиеся в папке, которая является рабочей по умолчанию (была выбрана при установке).

![Рисунок 2 - Домашняя страница Jupiter](<../.gitbook/assets/image (70).png>)

Если по отображающимся файлам непонятно, какая папка является рабочей, это можно узнать, например, создав новый ipynb-файл и исполнив следующие строки (о том, как создавать новые ipynb-файлы и про запуск кода см. далее):

```python
import os
os.getcwd()
```

Рабочая папка в данном случае /home/oem/. При желании рабочую папку (из которой запускается Jupyter Notebook) можно изменить. Например, так или так (перевод ответа на stackoverflow.com):

1. Открыть командную строку и ввести `jupyter notebook --generate-config`
2. Будет создан текстовый файл C:\Users\username.jupyter\jupyter\_notebook\_config.
3. Открыть этот файл (с помощью Блокнота или другого обычного текстового редактора). Найти строку номер 179 `#c.NotebookApp.notebook_dir = ”`.
4. Изменить ее на `c.NotebookApp.notebook_dir = ’C:/your/folder/’`, то есть вписать в `notebook_dir =”` путь к папке, из которой мы хотим запускать Jupyter Notebook. Сохранить и закрыть файл.

После этого Jupyter Notebook должен запускаться из той папки, которую вы указали. Если никаких изменений не произошло, откройте файл снова и убедитесь, что в строке, которую редактировали, вы не забыли убрать # в начале строки (раскомментировать строку).

Если Jupyter Notebook перестал запускаться, проверьте, что&#x20;

а) папка, к которой вы указали путь в notebook\_dir =”, существует;&#x20;

б) при записи пути к это папке использовались прямые слэши (/), а не обратные ().

Можно ничего не менять, а действовать так (обычно так и делается): переходить в папку, из которой хотим запустить Jupyter Notebook, а потом в командной строке, запущенной из этой папки, вводить jupyter notebook.&#x20;

### Работа в Jupiter Notebook

С помощью Jupyter Notebook можно загружать файлы (при загрузке они будут помещены в папку, из которой запускается Jupyter Notebook) или создавать свои файлы (ipynb и не только). С помощью Jupyter Notebook можно редактировать и запускать код, а также добавлять к нему текстовые комментарии.

#### Как загрузить файл в Jupyter Notebook (например, файл с материалами лекции/семинара)?

После того как открылась страница Home, нажать Upload (в правом верхнем углу)(рис. 3).

![Рисунок 3 - Окно с выделенной кнопкой загрузки](<../.gitbook/assets/image (68).png>)

#### Как создать свой ipynb-файл?

После того как открылась страница **Home**, нажать **New**.

![Рисунок 4 - Окно с отмеченным выпадающим меню New](<../.gitbook/assets/image (67).png>)

Выбрать Python 3 (python \[root] или что-то подобное, зависит от того, как было названо ядро при установке). В новой вкладке браузера появится файл **Untitled.ipynb**.

![Рисунок 5 - Окно ноутбука](<../.gitbook/assets/image (69).png>)

#### Как писать код?

Хотим написать код. По умолчанию тип ячейки всегда _Code_

![Рисунок 6 - Окно ноутбука с отмеченным меню "Тип ячейки"](<../.gitbook/assets/image (63).png>)

Пишем код (создаем переменные A и B и присваиваем им значения 1 и 2 соответственно):

![Рисунок 7 - Окно ноутбука с заполненной ячейкой кода](<../.gitbook/assets/image (62).png>)

Исполняем код: нажимаем Shift+Enter. Код исполнен, курсор перешел в следующую (только созданную) ячейку.

Если код подразумевает вывод чего-то на экран, то ожидаемый вывод появится под строкой:

![Рисунок 8 - Окно ноутбука с несколькими ячейками кода](<../.gitbook/assets/image (65).png>)

#### Как написать размеченный текст

Изменяем тип ячейки на Markdown (про язык разметки Markdown можно почитать [здесь](https://ru.wikipedia.org/wiki/Markdown), [здесь ](https://jupyter-notebook.readthedocs.io/en/latest/examples/Notebook/Working%20With%20Markdown%20Cells.html)и [здесь](http://nestacms.com/docs/creating-content/markdown-cheat-sheet)). Пишем текст и компилируем – нажимаем _Shift+Enter_

Например, исходный текст:&#x20;

```python
# Пример заголовка

Пример текста

Кот лакает *молоко*, а потом идет __поспать__.
```

Станет таким:

![Рисунок 9 - Текст в ячейке разметки Markdown](<../.gitbook/assets/image (61).png>)

### Как добавить еще одну ячейку?

В меню выбрать **Insert Cell** и соответствующий пункт (добавить ячейку выше или ниже текущей).

#### Как удалить/передвинуть/скопировать ячейку?

В меню выбрать **Edit **и соответствующий пункт: **Cut Cells** (удалить), **Move Cell Up** (передвинуть вверх), **Move Cell Down** (передвинуть вниз), **Copy Cells** (скопировать). То же можно сделать с помощью панели инструментов, находящейся под меню (при наведении курсора на значок, выдается описание действия).

### **Вывод изображений в ноутбуке**

Печать изображений может пригодиться в том случае, если вы используете библиотеку matplotlib для построения графиков. По умолчанию, графики не выводятся в рабочее поле ноутбука. Для того, чтобы графики отображались, необходимо ввести и выполнить следующую команду:

```python
%matplotlib inline
```

Пример вывода графика представлен на рисунке ниже.

![Рисунок 9 - Пример графика в ноутбуке ](<../.gitbook/assets/image (64).png>)



### Работа с Pandas

Для того, чтобы начать работать с данными, необходимо сначала загрузить их из файла. В данном задании мы будем работать с данными в формате CSV, предназначенном для хранения табличных данных: столбцы разделяются запятой, первая строка содержит имена столбцов. Пример загрузки данных в Pandas:

```python
import pandas
data = pandas.read_csv("titanic.csv", index_col="PassengerId")
```

Данные будут загружены в виде _DataFrame_, с помощью которого можно удобно работать с ними. В данном случае параметр `index_col="PassengerId"`означает, что колонка _PassengerId _задает нумерацию строк данного датафрейма.

Для того, чтобы посмотреть что представляют из себя данные, можно воспользоваться несколькими способами:&#x20;

* более привычным с точки зрения Python (если индекс указывается только один, то производится выбор строк):

```python
data[:10]
```

* или же воспользоваться методом датафрейма:

```python
data.head()
```

Один из способов доступа к столбцам датафрейма — использовать квадратные скобки и название столбца:

```python
data ["Pclass"]
```

Для подсчета некоторых статистик (количества, среднее, максимум, минимум) можно также использовать методы датафрейма:

```python
data["Pclass"].value_counts()
```

Более подробно со списком методов датафрейма можно познакомиться в документации.&#x20;

## Ход работы

Установить окружение Anaconda. Ознакомится с теоретическим материалом. Создать ноутбук и загрузить набор данных:

{% file src="../.gitbook/assets/titanic.csv" %}
Набор данных "Титаник"
{% endfile %}

Дополнительно ознакомится с документацией к библиотеке [Pandas](https://pandas.pydata.org/docs/).&#x20;

### Задание 1. Работа с языком Python

Загрузите и откройте в Jupiter notebook следующий [ноутбук](https://drive.google.com/file/d/1cmfPG5uoAWORPKbKMU96V8Vp4PAhBevS/view?usp=sharing). Выполните предложенные задания.&#x20;

### Задание 2. Работа с Pandas и наборами данных.

Загрузите и откройте в Jupiter notebook следующий [ноутбук](https://drive.google.com/file/d/1PsfRv\_pMbLrnSjA-uPDZyL-bDybVFcC1/view?usp=sharing).

Загрузите набор данных:&#x20;

{% file src="../.gitbook/assets/gameoftrones.rar" %}
Набор данных в архиве
{% endfile %}

Разархивируйте набор, и скопируйте файл в директорию с ноутбуком. Выполните предложенные задания.&#x20;

### Задание 3. Работа с наборами данных.&#x20;

Загрузите датасет titanic.csv и, используя описанные выше способы работы с данными, найдите ответы на вопросы:

1. Какое количество мужчин и женщин ехало на корабле? В качестве ответа приведите два числа через пробел.
2. Какой части пассажиров удалось выжить? Посчитайте долю выживших пассажиров. Ответ приведите в процентах (число в интервале от 0 до 100, знак процента не нужен), округлив до двух знаков.
3. Какую долю пассажиры первого класса составляли среди всех пассажиров? Ответ приведите в процентах (число в интервале от 0 до 100, знак процента не нужен), округлив до двух знаков.
4. Какого возраста были пассажиры? Посчитайте среднее и медиану возраста пассажиров. Посчитайте среднее и медиану возраста пассажиров. В качестве ответа приведите два числа через пробел.

### Задание 2.&#x20;

Выполнить поиск минимума функции при помощи разных вариантов генетических алгоритмов модуля оптимизации пакета Scilab:

1. $$y(x) = \sum_{i=1}^{n} x_i^2, x \in (-5.12, 5.12)$$&#x20;
2. $$z(x,y) =  x^2+y^2-cos(12x)-cos(18y), x \in (-2, 2)$$

## Контрольные вопросы

1. За что отвечают параметры алгоритма `optim_ga`

### Критерии оценки практического занятия

Оценивается знание материала, способность к его обобщению, критическому осмыслению, систематизации.&#x20;

* 3 балла: студент полностью выполнил задания.
* 2 балла: в усвоении учебного материала допущены небольшие пробелы.
* 1 балл: неполно или непоследовательно реализовано задание.
* 0 баллов: не раскрыто основное содержание учебного материала.

**Максимальный балл: 3 балла**
