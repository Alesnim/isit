---
description: 'Цель работы: научиться работать с логической моделью представления знаний'
---

# Практическая 2. Модели представления знаний. Продукционная модель

## Теоретические сведения

Термин «продукция» принадлежит американскому логику Эмилю Леону Посту \[[17](https://sites.google.com/site/anisimovkhv/learning/iis/lecture/literatura#lit17)\]. В понимании Поста в качестве продукции выступала только та ее часть, которая сейчас называется ядром \(А → В, ЕСЛИ А ТО В\).

В общем виде под продукцией понимается выражение следующего вида:

$$
(i): Q; P; A \to B; N
$$

Здесь **i** - имя \(идентификатор\) продукции, с помощью которого данная продукция выделяется из всего множества продукций. В качестве имени может выступать некоторая лексема, отражающая суть данной продукции \(например, «покупка книги» или «набор кода замка»\), или порядковый номер продукции в их множестве, хранящемся в памяти системы.

**Q** характеризует сферу \(область\) применения продукции. Разделение знаний на отдельные сферы позволяет экономить время при поиске решения задачи. Например, часть продукций описывает процесс приготовления пищи, а вторая – выбора маршрута путешествия и т. п.

Основным элементом продукции является ее ядро: **А → В**. Интерпретация ядра продукции может быть различной и зависит от того, что стоит слева и справа от знака импликации → \(⇒\). Обычное прочтение ядра продукции выглядит так: ЕСЛИ A ТО B. Более сложные конструкции ядра допускают в правой части альтернативный выбор, например, ЕСЛИ А ТО B1, ИНАЧЕ B2. Основание импликации \(условие, А\) называется **антецедентом**, следствие \(действие, В\) – **консенквентом**.

| A | B | **А → В** |
| :--- | :--- | :--- |
| 1 | 1 | 1 |
| 1 | 0 | 0 |
| 0 | 1 | 1 |
| 0 | 0 | 1 |

Если **А** ложно, то об истинности **В** ничего сказать нельзя, т.е. из лжи может следовать все что угодно \(для импликации принято, что следует истина\). Возможны и другие интерпретации ядра продукции, например **A** описывает некоторое условие, необходимое для того, чтобы можно было совершить действие **В**.

**Р** есть условие применимости ядра продукции. Обычно Р представляет собой логическое выражение. Когда **Р** принимает значение «истина», ядро продукции активизируется. Если **Р** ложно, то ядро продукции не может быть использовано. Например, если в продукции «НАЛИЧИЕ ДЕНЕГ; ЕСЛИ ХОЧЕШЬ КУПИТЬ ВЕЩЬ X, ТО ЗАПЛАТИ В КАССУ ЕЕ СТОИМОСТЬ И ОТДАЙ ЧЕК ПРОДАВЦУ» условие применимости ядра продукции ложно, т.е. денег нет, то применить ядро продукции невозможно.

**N** описывает постусловия продукции. Они активизируются только в том случае, если ядро продукции реализовалось. Постусловия продукции описывают действия и процедуры, которые необходимо выполнить после реализации **В**. Например, после покупки некоторой вещи в магазине необходимо в описи товаров, имеющихся в этом магазине, уменьшить количество вещей такого типа на единицу. Выполнение **N** может происходить не сразу после реализации ядра продукции.

Если в памяти системы хранится некоторый набор продукций, то они образуют систему продукций. В системе продукций должны быть заданы специальные процедуры управления продукциями, с помощью которых происходит их актуализация и выбор для выполнения той или иной продукции из числа актуализированных.

### Работа с продуктовыми моделями в CLIPS

**CLIPS**, \(от англ. C Language Integrated Production System\) — программная среда для разработки экспертных систем. Синтаксис и название предложены Чарльзом Форги \(Charles Forgy\) в OPS \(Official Production System\). 

CLIPS является продукционной системой. Реализация вывода использует алгоритм Rete.

1. Установить среду работы CLIPS \([ссылка](https://sourceforge.net/projects/clipsrules/files/CLIPS/6.30/)\)
2. Открыть среду разработки \(рис 1\)

![&#x420;&#x438;&#x441;&#x443;&#x43D;&#x43E;&#x43A; 1 - &#x421;&#x440;&#x435;&#x434;&#x430; &#x440;&#x430;&#x437;&#x440;&#x430;&#x431;&#x43E;&#x442;&#x43A;&#x438; CLIPS \(&#x433;&#x440;&#x430;&#x444;&#x438;&#x447;&#x435;&#x441;&#x43A;&#x438;&#x439; &#x432;&#x430;&#x440;&#x438;&#x430;&#x43D;&#x442;\)](../.gitbook/assets/image.png)

Особенность CLIPS состоит в том, что он имеет встроенный механизм вывода на продукционной базе знаний. Эту его особенность рассмотрим на небольшом примере. Пусть описание предметной области состоит всего из двух предложений:

> ```text
>  Программист изучает CLIPS.      (Programmer studies CLIPS)
>  CLIPS используется в ЭС.        (CLIPS is used in expert systems)
> ```

Из этих двух исходных посылок любому человеку, который не знаком ни с CLIPS, ни с экспертными системами, но который обладает простой жизненной практикой и интеллектом становится ясно, что

```text
Программист разрабатывает ЭС.   
                (Programmer developing an expert system).
```

Этот вывод следует из того, что любой человек понимает, что если кто-то \(X\) изучает что-то \(Y\), а это что-то \(Y\) в чем-то \(Z\) используется, то этот кто-то \(X\) интересуется этим чем-то \(Z\) или работает с ним. Изложенные знания можно формализовать в виде продукционного \(эвристического\) правила:

```text
ЕСЛИ
     X studies Y               ;(изучает)
 И
     Y is used in Z            ;(используется в)
 ТО
     X developing an Z         ;(разрабатывает)
```

Но если удалось знания о предметной области формализовать в виде системы продукций, то можно перенести их в базу знаний CLIPS и просить делать заключения уже его механизм вывода. Рассмотренный пример может быть реализован в виде приведенной ниже программы, которую следует набрать в любом текстовом редакторе и сохранить, например, в виде файла **\_pr1.clp**.

```text
;---Program #1---
 (deffacts myfacts
    (The Programmer studies CLIPS)
    (The CLIPS is used in expert system)
 )
 (defrule my-rule
    (The ?x studies ?y)
    (The ?y is used in $?z)
    =>
    (printout t crlf)
    (printout t "My conclusion is: " ?x " developing an " $?z)
    (printout t crlf crlf)
 )
```

Первая строка представляет собой комментарий, за которой следует конструктор для двух исходных фактов, а далее конструктор правила. Правая часть правила предусматривает вывод на экран результатов логического вывода, в том случае, если левая часть правила будет согласована на текущем наборе фактов в рабочей памяти системы продукций.

Если теперь загрузить, например, консольную версию CLIPS, а затем выполнить команды \(clear\), \(load\), \(reset\) и \(run\), то система продукций CLIPS на основе имеющихся фактов делает заключение, что “Программист разрабатывает ЭС” \(рис. 2\).

![&#x420;&#x438;&#x441;&#x443;&#x43D;&#x43E;&#x43A; 2 - &#x421;&#x440;&#x435;&#x434;&#x430; CLIPS &#x441; &#x440;&#x435;&#x437;&#x443;&#x43B;&#x44C;&#x442;&#x430;&#x442;&#x430;&#x43C;&#x438; &#x432;&#x44B;&#x43F;&#x43E;&#x43B;&#x43D;&#x435;&#x43D;&#x438;&#x44F; &#x43F;&#x440;&#x43E;&#x433;&#x440;&#x430;&#x43C;&#x43C;&#x44B;](../.gitbook/assets/image%20%281%29.png)

В CLIPS существует несколько описывающих конструкций: 

| Название команды | Действие |
| :--- | :--- |
| defrule | определение правил; |
| deffacts | определение фактов; |
| deftemplate | определение шаблона факта; |
| defglobal | определение глобальных переменных; |
| deffunction | определение функций; |
| defmodule | определение модулей \(совокупности правил\); |
| defclass | определение классов; |
| defintances | определение объектов по шаблону, заданному defclass ; |
| defmessagehandler | определение сообщений для объектов; |
| defgeneric | создание заголовка родовой функции; |
| defmethod | определение метода родовой функции. |

При записи все они заключаются в скобки. Определение конструкции отличается от вызова функции главным образом по производимому эффекту. Обычно вызов функции оставляет состояние среды CLIPS без изменений \(за рядом исключений, когда речь идет о функциях сброса, очистки, открытия файла и т.п.\). Определение конструкции, напротив, в точности направлено на изменение состояния среды путем внесения изменений в базу знаний CLIPS. В отличие от функций конструкции никогда не возвращают значений.

Все конструкции \(за исключением defglobal\) позволяют размещать комментарии сразу вслед за именем конструкции. Кроме того, комментарии могут вставляться в код CLIPS при помощи точки с запятой \(;\). Все, что следует за \(;\) до конца строки, будет игнорироваться CLIPS. Если \(;\) стоит первым символом в строке, то вся строка считается комментарием.

Факты являются одной из основных форм представления информации в системе CLIPS. Каждый факт представляет фрагмент информации, который был помещен в текущий список фактов, называемый fact-list. Факт представляет собой основную единицу данных, используемую правилами.





## Ход работы

### Задание 1. Описание продуктовой модели 

На основе перечне тем опишите продуктовую модель следующих процессов: 

1. Расписание дел на неделю
2. Алгоритм выбора фильма для просмотра
3. Классификация программ
4. Классификация пицц
5. Алгоритм выбора напитка, связанный с состоянием среды \(жарко, холодно, солнечно и т.д.\)
6. Алгоритм игры в крестики-нолики
7. Алгоритм сдачи экзамена студентом
8. Алгоритм выбора одежды, связанный со временем года 
9. Классификация музыкальных жанров
10. Классификация языков программирования

### Задание 2. Описание продуктовой модели в CLIPS

На основе изученных сведений о системе CLIPS написать решение следующих задач: 

1. Составить шаблоны фигур \(Круг, Прямоугольник, Квадрат\) и посчитать площадь квадрата со стороной 4.



### Дополнительные ссылки

1. [Дополнительный материал по CLIPS ](https://www.intuit.ru/studies/courses/46/46/lecture/1380)

### Перечень вопросов для закрепления материала

1.   Что называется «ядром продукции»?
2. Как определить шаблон структуры на CLIPS? 

### Критерии оценки практического занятия

Оценивается знание материала, способность к его обобщению, критическому осмыслению, систематизации. 

* 3 балла: студент полностью выполнил задания.
* 2 балла: в усвоении учебного материала допущены небольшие пробелы.
* 1 балл: неполно или непоследовательно реализовано задание.
* 0 баллов: не раскрыто основное содержание учебного материала.

**Максимальный балл: 3 балла**

